<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sinapse Espacial - Jogo de Cria√ß√£o C√≥smica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        .node-glow {
            box-shadow: 0 0 15px 5px rgba(255, 255, 255, 0.7);
        }
        .cosmic-bg {
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
        }
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle var(--duration) ease-in-out infinite;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        .connection {
            stroke: rgba(173, 216, 230, 0.5);
            stroke-width: 2;
            fill: none;
        }
    </style>
</head>
<body class="cosmic-bg text-white min-h-screen overflow-x-hidden relative">
    <!-- Stars background -->
    <div id="stars-container" class="fixed inset-0 overflow-hidden z-0"></div>
    
    <div class="container mx-auto px-4 py-8 relative z-10">
        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-8">
            <div class="text-center md:text-left mb-4 md:mb-0">
                <h1 class="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 via-pink-500 to-blue-500">
                    Sinapse Espacial
                </h1>
                <p class="text-gray-300 mt-2">Crie, combine e explore o cosmos infinito</p>
            </div>
            
            <div class="flex items-center space-x-4 bg-gray-800 bg-opacity-50 rounded-lg p-3">
                <div class="text-center">
                    <p class="text-xs text-gray-400">N√çVEL</p>
                    <p class="text-xl font-bold text-yellow-300" id="level">1</p>
                </div>
                <div class="h-10 w-1 bg-gray-600"></div>
                <div class="text-center">
                    <p class="text-xs text-gray-400">XP</p>
                    <p class="text-xl font-bold text-blue-300" id="xp">0</p>
                </div>
                <div class="h-10 w-1 bg-gray-600"></div>
                <div class="text-center">
                    <p class="text-xs text-gray-400">DESCOBERTAS</p>
                    <p class="text-xl font-bold text-green-300" id="discoveries">4</p>
                </div>
            </div>
        </header>
        
        <!-- Main game area -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Elements panel -->
            <div class="lg:col-span-1 bg-gray-900 bg-opacity-50 rounded-xl p-4 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-center border-b border-gray-700 pb-2">
                    <i class="fas fa-atom mr-2 text-purple-400"></i>Elementos
                </h2>
                
                <div class="grid grid-cols-2 gap-3" id="elements-container">
                    <!-- Elements will be added here by JavaScript -->
                </div>
                
                <div class="mt-6">
                    <h3 class="text-lg font-medium mb-2">Combina√ß√£o atual</h3>
                    <div class="flex justify-center items-center space-x-4 mb-4">
                        <div class="w-16 h-16 rounded-full bg-gray-800 border-2 border-dashed border-gray-600 flex items-center justify-center text-2xl" id="slot1">
                            <span class="text-gray-500">?</span>
                        </div>
                        <div class="text-xl">+</div>
                        <div class="w-16 h-16 rounded-full bg-gray-800 border-2 border-dashed border-gray-600 flex items-center justify-center text-2xl" id="slot2">
                            <span class="text-gray-500">?</span>
                        </div>
                        <div class="text-xl">=</div>
                        <div class="w-16 h-16 rounded-full bg-gray-800 border-2 border-gray-600 flex items-center justify-center text-2xl" id="result-slot">
                            <span class="text-gray-500">?</span>
                        </div>
                    </div>
                    
                    <div class="flex space-x-3">
                        <button id="combine-btn" class="flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:transform-none" disabled>
                            Combinar
                        </button>
                        <button id="clear-btn" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition">
                            Limpar
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Discovery log -->
            <div class="lg:col-span-1 bg-gray-900 bg-opacity-50 rounded-xl p-4 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-center border-b border-gray-700 pb-2">
                    <i class="fas fa-scroll mr-2 text-yellow-400"></i>Descobertas
                </h2>
                
                <div class="h-96 overflow-y-auto pr-2" id="discovery-log">
                    <div class="text-gray-400 italic text-center py-10">Suas descobertas aparecer√£o aqui</div>
                </div>
            </div>
            
            <!-- Cosmic network -->
            <div class="lg:col-span-1 bg-gray-900 bg-opacity-50 rounded-xl p-4 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-center border-b border-gray-700 pb-2">
                    <i class="fas fa-project-diagram mr-2 text-green-400"></i>Rede C√≥smica
                </h2>
                
                <div class="relative h-96 overflow-hidden rounded-lg bg-black bg-opacity-30 border border-gray-800">
                    <svg id="network-svg" class="w-full h-full" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid meet">
                        <!-- Connections will be drawn here -->
                    </svg>
                    <div id="network-nodes" class="absolute inset-0">
                        <!-- Nodes will be positioned here -->
                    </div>
                </div>
                
                <div class="mt-3 text-sm text-gray-400 text-center">
                    <p>Seu conhecimento c√≥smico se expande com cada nova combina√ß√£o</p>
                </div>
            </div>
        </div>
        
        <!-- Unlocks panel -->
        <div class="mt-8 bg-gray-900 bg-opacity-50 rounded-xl p-4 border border-gray-700">
            <h2 class="text-xl font-semibold mb-4 text-center border-b border-gray-700 pb-2">
                <i class="fas fa-lock-open mr-2 text-blue-400"></i>Desbloqueios
            </h2>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="unlocks-container">
                <div class="bg-gray-800 bg-opacity-70 rounded-lg p-3 border border-gray-700 flex items-center">
                    <div class="w-10 h-10 rounded-full bg-purple-900 flex items-center justify-center mr-3">
                        <i class="fas fa-meteor text-purple-300"></i>
                    </div>
                    <div>
                        <h3 class="font-medium">Fus√£o Avan√ßada</h3>
                        <p class="text-xs text-gray-400">N√≠vel 5</p>
                    </div>
                </div>
                <div class="bg-gray-800 bg-opacity-30 rounded-lg p-3 border border-gray-700 flex items-center opacity-50">
                    <div class="w-10 h-10 rounded-full bg-blue-900 flex items-center justify-center mr-3">
                        <i class="fas fa-stars text-blue-300"></i>
                    </div>
                    <div>
                        <h3 class="font-medium">Anomalias C√≥smicas</h3>
                        <p class="text-xs text-gray-400">N√≠vel 10</p>
                    </div>
                </div>
                <div class="bg-gray-800 bg-opacity-30 rounded-lg p-3 border border-gray-700 flex items-center opacity-50">
                    <div class="w-10 h-10 rounded-full bg-green-900 flex items-center justify-center mr-3">
                        <i class="fas fa-atom text-green-300"></i>
                    </div>
                    <div>
                        <h3 class="font-medium">Tr√≠ade Elemental</h3>
                        <p class="text-xs text-gray-400">N√≠vel 15</p>
                    </div>
                </div>
                <div class="bg-gray-800 bg-opacity-30 rounded-lg p-3 border border-gray-700 flex items-center opacity-50">
                    <div class="w-10 h-10 rounded-full bg-red-900 flex items-center justify-center mr-3">
                        <i class="fas fa-black-hole text-red-300"></i>
                    </div>
                    <div>
                        <h3 class="font-medium">Singularidade</h3>
                        <p class="text-xs text-gray-400">N√≠vel 20</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Tutorial modal -->
    <div id="tutorial-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 px-4">
        <div class="bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-purple-300">Bem-vindo ao Sinapse Espacial</h2>
                    <button id="close-tutorial" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-start">
                        <div class="bg-purple-600 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 mr-3 mt-1">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg">Como jogar</h3>
                            <p class="text-gray-300">Combine elementos b√°sicos para criar novos conceitos c√≥smicos. Cada nova descoberta expande sua rede de conhecimento.</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start">
                        <div class="bg-blue-600 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 mr-3 mt-1">
                            <i class="fas fa-atom"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg">Elementos Iniciais</h3>
                            <div class="flex space-x-2 mt-2">
                                <div class="bg-gray-700 rounded-full w-10 h-10 flex items-center justify-center text-xl">üî•</div>
                                <div class="bg-gray-700 rounded-full w-10 h-10 flex items-center justify-center text-xl">üíß</div>
                                <div class="bg-gray-700 rounded-full w-10 h-10 flex items-center justify-center text-xl">üå±</div>
                                <div class="bg-gray-700 rounded-full w-10 h-10 flex items-center justify-center text-xl">üå¨Ô∏è</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-start">
                        <div class="bg-green-600 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 mr-3 mt-1">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg">Exemplos de Combina√ß√µes</h3>
                            <ul class="list-disc list-inside text-gray-300 space-y-1 mt-2">
                                <li>√Ågua + √Ågua = Tsunami üåä</li>
                                <li>Fogo + Terra = Lava üåã</li>
                                <li>Terra + Vento = Areia ‚è≥</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="flex items-start">
                        <div class="bg-yellow-600 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 mr-3 mt-1">
                            <i class="fas fa-star"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg">Progress√£o</h3>
                            <p class="text-gray-300">Ganhe XP com cada nova descoberta. Combina√ß√µes mais complexas d√£o mais XP. Desbloqueie novos recursos visuais e mec√¢nicas conforme avan√ßa.</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 flex justify-center">
                    <button id="start-game" class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold py-2 px-6 rounded-lg transition-all transform hover:scale-105">
                        Come√ßar Jornada C√≥smica
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Game state
        const gameState = {
            elements: [
                { id: 1, name: 'Fogo', emoji: 'üî•', discovered: true, x: 400, y: 300 },
                { id: 2, name: '√Ågua', emoji: 'üíß', discovered: true, x: 300, y: 200 },
                { id: 3, name: 'Terra', emoji: 'üå±', discovered: true, x: 500, y: 200 },
                { id: 4, name: 'Vento', emoji: 'üå¨Ô∏è', discovered: true, x: 400, y: 100 }
            ],
            combinations: [
                { elements: [2, 2], result: { id: 5, name: 'Tsunami', emoji: 'üåä', x: 200, y: 100 } },
                { elements: [1, 3], result: { id: 6, name: 'Lava', emoji: 'üåã', x: 600, y: 300 } },
                { elements: [3, 4], result: { id: 7, name: 'Areia', emoji: '‚è≥', x: 600, y: 100 } },
                { elements: [1, 2], result: { id: 8, name: 'Vapor', emoji: '‚òÅÔ∏è', x: 200, y: 300 } },
                { elements: [1, 4], result: { id: 9, name: 'Tempestade', emoji: '‚ö°', x: 400, y: 400 } },
                { elements: [2, 3], result: { id: 10, name: 'Planta', emoji: 'üåø', x: 700, y: 200 } },
                { elements: [5, 3], result: { id: 11, name: 'Ilha', emoji: 'üèùÔ∏è', x: 100, y: 200 } },
                { elements: [6, 2], result: { id: 12, name: 'Pedra', emoji: 'ü™®', x: 700, y: 400 } },
                { elements: [7, 4], result: { id: 13, name: 'Deserto', emoji: 'üèúÔ∏è', x: 700, y: 50 } },
                { elements: [8, 3], result: { id: 14, name: 'Nuvem', emoji: '‚õÖ', x: 300, y: 400 } },
                { elements: [9, 2], result: { id: 15, name: 'Chuva', emoji: 'üåßÔ∏è', x: 500, y: 400 } },
                { elements: [10, 4], result: { id: 16, name: 'P√≥len', emoji: 'üå∏', x: 800, y: 200 } },
                { elements: [11, 1], result: { id: 17, name: 'Vulc√£o', emoji: 'üåã', x: 50, y: 300 } },
                { elements: [12, 1], result: { id: 18, name: 'Metal', emoji: '‚õìÔ∏è', x: 800, y: 450 } },
                { elements: [13, 2], result: { id: 19, name: 'O√°sis', emoji: 'üèûÔ∏è', x: 800, y: 100 } },
                { elements: [14, 4], result: { id: 20, name: 'N√©voa', emoji: 'üå´Ô∏è', x: 200, y: 450 } },
                { elements: [15, 3], result: { id: 21, name: 'Floresta', emoji: 'üå≤', x: 500, y: 500 } },
                { elements: [16, 1], result: { id: 22, name: 'Fogo F√°tuo', emoji: 'üî•', x: 900, y: 250 } },
                { elements: [17, 2], result: { id: 23, name: 'Ilha Vulc√¢nica', emoji: 'üåã', x: 50, y: 200 } },
                { elements: [18, 3], result: { id: 24, name: 'Ferramenta', emoji: 'üõ†Ô∏è', x: 900, y: 500 } },
                { elements: [19, 4], result: { id: 25, name: 'Mirage', emoji: 'üèúÔ∏è', x: 900, y: 150 } },
                { elements: [20, 1], result: { id: 26, name: 'Fuma√ßa', emoji: 'üí®', x: 150, y: 500 } },
                { elements: [21, 4], result: { id: 27, name: 'Madeira', emoji: 'ü™µ', x: 500, y: 550 } },
                { elements: [22, 3], result: { id: 28, name: 'Cinzas', emoji: 'üß™', x: 950, y: 300 } },
                { elements: [23, 2], result: { id: 29, name: 'Arquip√©lago', emoji: 'üèùÔ∏è', x: 50, y: 100 } },
                { elements: [24, 4], result: { id: 30, name: 'Moinho', emoji: 'üèóÔ∏è', x: 950, y: 550 } },
                { elements: [25, 1], result: { id: 31, name: 'Calor', emoji: '‚ô®Ô∏è', x: 950, y: 200 } },
                { elements: [26, 3], result: { id: 32, name: 'Fuma√ßa Negra', emoji: 'üè≠', x: 200, y: 550 } },
                { elements: [27, 1], result: { id: 33, name: 'Carv√£o', emoji: '‚ö´', x: 550, y: 600 } },
                { elements: [28, 2], result: { id: 34, name: 'Lama', emoji: 'üå´Ô∏è', x: 1000, y: 350 } },
                { elements: [29, 4], result: { id: 35, name: 'Navega√ß√£o', emoji: '‚õµ', x: 50, y: 50 } },
                { elements: [30, 1], result: { id: 36, name: 'Energia', emoji: '‚ö°', x: 1000, y: 600 } },
                { elements: [31, 3], result: { id: 37, name: 'Deserto de Sal', emoji: 'üßÇ', x: 1000, y: 250 } },
                { elements: [32, 4], result: { id: 38, name: 'Polui√ß√£o', emoji: 'üè≠', x: 250, y: 600 } },
                { elements: [33, 4], result: { id: 39, name: 'P√≥', emoji: 'üí®', x: 600, y: 650 } },
                { elements: [34, 1], result: { id: 40, name: 'Cer√¢mica', emoji: 'üè∫', x: 1050, y: 400 } },
                { elements: [35, 1], result: { id: 41, name: 'Faroeste', emoji: 'üåµ', x: 50, y: 0 } },
                { elements: [36, 3], result: { id: 42, name: 'Civiliza√ß√£o', emoji: 'üèõÔ∏è', x: 1050, y: 650 } },
                { elements: [37, 2], result: { id: 43, name: 'Mar Morto', emoji: 'üßÇ', x: 1050, y: 200 } },
                { elements: [38, 3], result: { id: 44, name: 'Smog', emoji: 'üå´Ô∏è', x: 300, y: 650 } },
                { elements: [39, 1], result: { id: 45, name: 'Explos√£o', emoji: 'üí•', x: 650, y: 700 } },
                { elements: [40, 4], result: { id: 46, name: 'Tornado', emoji: 'üå™Ô∏è', x: 1100, y: 450 } },
                { elements: [41, 2], result: { id: 47, name: 'O√°sis do Cowboy', emoji: 'ü§†', x: 50, y: -50 } },
                { elements: [42, 4], result: { id: 48, name: 'Progresso', emoji: 'üìà', x: 1100, y: 700 } },
                { elements: [43, 4], result: { id: 49, name: 'Cristal de Sal', emoji: '‚ú®', x: 1100, y: 150 } },
                { elements: [44, 1], result: { id: 50, name: 'Chuva √Åcida', emoji: '‚òî', x: 350, y: 700 } },
                { elements: [45, 2], result: { id: 51, name: 'Cratera', emoji: 'üåë', x: 700, y: 750 } },
                { elements: [46, 3], result: { id: 52, name: 'Destrui√ß√£o', emoji: 'üí£', x: 1150, y: 500 } },
                { elements: [47, 3], result: { id: 53, name: 'Rancho', emoji: 'üêÑ', x: 50, y: -100 } },
                { elements: [48, 1], result: { id: 54, name: 'Tecnologia', emoji: 'üíª', x: 1150, y: 750 } },
                { elements: [49, 1], result: { id: 55, name: 'L√¢mpada de Sal', emoji: 'ü™î', x: 1150, y: 100 } },
                { elements: [50, 4], result: { id: 56, name: 'Nuvem T√≥xica', emoji: '‚òÅÔ∏è', x: 400, y: 750 } },
                { elements: [51, 3], result: { id: 57, name: 'Meteoro', emoji: '‚òÑÔ∏è', x: 750, y: 800 } },
                { elements: [52, 2], result: { id: 58, name: 'Guerra', emoji: '‚öîÔ∏è', x: 1200, y: 550 } },
                { elements: [53, 4], result: { id: 59, name: 'Vaqueiro', emoji: 'ü§†', x: 50, y: -150 } },
                { elements: [54, 3], result: { id: 60, name: 'IA', emoji: 'ü§ñ', x: 1200, y: 800 } },
                { elements: [55, 2], result: { id: 61, name: 'Spa', emoji: 'üßñ', x: 1200, y: 50 } },
                { elements: [56, 1], result: { id: 62, name: 'Fogo F√°tuo T√≥xico', emoji: 'üî•', x: 450, y: 800 } },
                { elements: [57, 4], result: { id: 63, name: 'Extin√ß√£o', emoji: 'ü¶ñ', x: 800, y: 850 } },
                { elements: [58, 3], result: { id: 64, name: 'Paz', emoji: 'üïäÔ∏è', x: 1250, y: 600 } },
                { elements: [59, 1], result: { id: 65, name: 'Revolver', emoji: 'üî´', x: 50, y: -200 } },
                { elements: [60, 4], result: { id: 66, name: 'Singularidade', emoji: '‚öõÔ∏è', x: 1250, y: 850 } }
            ],
            selectedElements: [],
            xp: 0,
            level: 1,
            discoveries: 4,
            discoveryLog: []
        };

        // DOM elements
        const elementsContainer = document.getElementById('elements-container');
        const slot1 = document.getElementById('slot1');
        const slot2 = document.getElementById('slot2');
        const resultSlot = document.getElementById('result-slot');
        const combineBtn = document.getElementById('combine-btn');
        const clearBtn = document.getElementById('clear-btn');
        const discoveryLog = document.getElementById('discovery-log');
        const networkSvg = document.getElementById('network-svg');
        const networkNodes = document.getElementById('network-nodes');
        const xpDisplay = document.getElementById('xp');
        const levelDisplay = document.getElementById('level');
        const discoveriesDisplay = document.getElementById('discoveries');
        const tutorialModal = document.getElementById('tutorial-modal');
        const closeTutorial = document.getElementById('close-tutorial');
        const startGame = document.getElementById('start-game');
        const starsContainer = document.getElementById('stars-container');

        // Initialize game
        function initGame() {
            createStars();
            renderElements();
            renderNetwork();
            updateStats();
            
            // Show tutorial modal
            tutorialModal.classList.remove('hidden');
            
            // Event listeners
            combineBtn.addEventListener('click', combineElements);
            clearBtn.addEventListener('click', clearSelection);
            closeTutorial.addEventListener('click', () => tutorialModal.classList.add('hidden'));
            startGame.addEventListener('click', () => tutorialModal.classList.add('hidden'));
        }

        // Create stars for background
        function createStars() {
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                // Random size between 1 and 3px
                const size = Math.random() * 2 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                // Random position
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                
                // Random animation duration
                star.style.setProperty('--duration', `${Math.random() * 5 + 3}s`);
                
                starsContainer.appendChild(star);
            }
        }

        // Render discovered elements
        function renderElements() {
            elementsContainer.innerHTML = '';
            
            gameState.elements.filter(el => el.discovered).forEach(element => {
                const elementDiv = document.createElement('div');
                elementDiv.className = 'bg-gray-800 rounded-lg p-3 flex flex-col items-center cursor-pointer transition-all transform hover:scale-105 hover:bg-gray-700';
                elementDiv.innerHTML = `
                    <div class="w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center text-2xl mb-1 element-icon ${gameState.selectedElements.includes(element.id) ? 'node-glow' : ''}">
                        ${element.emoji}
                    </div>
                    <span class="text-sm">${element.name}</span>
                `;
                
                elementDiv.addEventListener('click', () => selectElement(element.id));
                elementsContainer.appendChild(elementDiv);
            });
        }

        // Select an element for combination
        function selectElement(elementId) {
            if (gameState.selectedElements.length >= 2 && !gameState.selectedElements.includes(elementId)) {
                return; // Only allow 2 selections
            }
            
            const index = gameState.selectedElements.indexOf(elementId);
            if (index > -1) {
                gameState.selectedElements.splice(index, 1); // Deselect
            } else {
                gameState.selectedElements.push(elementId); // Select
            }
            
            updateSelectionUI();
            renderElements();
        }

        // Update the selection slots UI
        function updateSelectionUI() {
            // Clear slots
            slot1.innerHTML = '<span class="text-gray-500">?</span>';
            slot2.innerHTML = '<span class="text-gray-500">?</span>';
            resultSlot.innerHTML = '<span class="text-gray-500">?</span>';
            
            // Update with selected elements
            if (gameState.selectedElements.length > 0) {
                const element1 = gameState.elements.find(el => el.id === gameState.selectedElements[0]);
                slot1.innerHTML = element1.emoji;
                slot1.classList.remove('border-dashed');
                slot1.classList.add('border-solid', 'border-purple-400');
            } else {
                slot1.classList.add('border-dashed');
                slot1.classList.remove('border-solid', 'border-purple-400');
            }
            
            if (gameState.selectedElements.length > 1) {
                const element2 = gameState.elements.find(el => el.id === gameState.selectedElements[1]);
                slot2.innerHTML = element2.emoji;
                slot2.classList.remove('border-dashed');
                slot2.classList.add('border-solid', 'border-blue-400');
                
                // Enable combine button
                combineBtn.disabled = false;
            } else {
                slot2.classList.add('border-dashed');
                slot2.classList.remove('border-solid', 'border-blue-400');
                
                // Disable combine button
                combineBtn.disabled = true;
            }
        }

        // Combine selected elements
        function combineElements() {
            if (gameState.selectedElements.length !== 2) return;
            
            const [id1, id2] = gameState.selectedElements;
            const element1 = gameState.elements.find(el => el.id === id1);
            const element2 = gameState.elements.find(el => el.id === id2);
            
            // Check if combination exists
            const combination = gameState.combinations.find(combo => {
                return (combo.elements[0] === id1 && combo.elements[1] === id2) || 
                       (combo.elements[0] === id2 && combo.elements[1] === id1);
            });
            
            if (combination) {
                // Check if result already exists
                const existingElement = gameState.elements.find(el => el.id === combination.result.id);
                
                if (existingElement) {
                    if (existingElement.discovered) {
                        addToDiscoveryLog(`Voc√™ j√° descobriu ${combination.result.name}! (${element1.name} + ${element2.name})`, false);
                    } else {
                        // Mark as discovered
                        existingElement.discovered = true;
                        gameState.discoveries++;
                        
                        // Add XP based on complexity (simple formula for demo)
                        const xpGained = Math.max(10, 50 - (gameState.elements.filter(el => el.discovered).length * 2));
                        gameState.xp += xpGained;
                        
                        // Check level up
                        checkLevelUp();
                        
                        // Add to log
                        addToDiscoveryLog(`Nova descoberta: ${combination.result.name}! (${element1.name} + ${element2.name}) +${xpGained}XP`, true);
                        
                        // Update UI
                        updateStats();
                        renderElements();
                        renderNetwork();
                    }
                } else {
                    // Add new element
                    const newElement = {
                        ...combination.result,
                        discovered: true
                    };
                    gameState.elements.push(newElement);
                    gameState.discoveries++;
                    
                    // Add XP
                    const xpGained = Math.max(10, 50 - (gameState.elements.filter(el => el.discovered).length * 2));
                    gameState.xp += xpGained;
                    
                    // Check level up
                    checkLevelUp();
                    
                    // Add to log
                    addToDiscoveryLog(`Nova descoberta: ${newElement.name}! (${element1.name} + ${element2.name}) +${xpGained}XP`, true);
                    
                    // Update UI
                    updateStats();
                    renderElements();
                    renderNetwork();
                }
                
                // Show result temporarily
                resultSlot.innerHTML = combination.result.emoji;
                resultSlot.classList.add('node-glow', 'pulse');
                setTimeout(() => {
                    resultSlot.classList.remove('node-glow', 'pulse');
                }, 2000);
            } else {
                addToDiscoveryLog(`Combina√ß√£o desconhecida: ${element1.name} + ${element2.name}`, false);
            }
            
            // Clear selection after short delay
            setTimeout(() => {
                clearSelection();
            }, 1000);
        }

        // Check if player leveled up
        function checkLevelUp() {
            const xpNeeded = gameState.level * 100;
            if (gameState.xp >= xpNeeded) {
                gameState.level++;
                gameState.xp -= xpNeeded;
                
                // Add level up message
                addToDiscoveryLog(`‚≠ê N√≠vel ${gameState.level} alcan√ßado! ‚≠ê`, true);
                
                // Update UI
                updateStats();
            }
        }

        // Clear current selection
        function clearSelection() {
            gameState.selectedElements = [];
            updateSelectionUI();
            renderElements();
        }

        // Add message to discovery log
        function addToDiscoveryLog(message, isNewDiscovery) {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            
            gameState.discoveryLog.unshift({
                message,
                time: timeString,
                isNew: isNewDiscovery
            });
            
            // Keep only last 50 entries
            if (gameState.discoveryLog.length > 50) {
                gameState.discoveryLog.pop();
            }
            
            renderDiscoveryLog();
        }

        // Render discovery log
        function renderDiscoveryLog() {
            discoveryLog.innerHTML = '';
            
            if (gameState.discoveryLog.length === 0) {
                discoveryLog.innerHTML = '<div class="text-gray-400 italic text-center py-10">Suas descobertas aparecer√£o aqui</div>';
                return;
            }
            
            gameState.discoveryLog.forEach(entry => {
                const logEntry = document.createElement('div');
                logEntry.className = `mb-2 p-2 rounded-lg ${entry.isNew ? 'bg-blue-900 bg-opacity-30' : 'bg-gray-800 bg-opacity-30'}`;
                logEntry.innerHTML = `
                    <div class="flex justify-between items-start">
                        <span class="${entry.isNew ? 'font-medium text-blue-300' : 'text-gray-300'}">${entry.message}</span>
                        <span class="text-xs text-gray-500 ml-2">${entry.time}</span>
                    </div>
                `;
                discoveryLog.appendChild(logEntry);
            });
        }

        // Render cosmic network
        function renderNetwork() {
            // Clear existing nodes and connections
            networkNodes.innerHTML = '';
            networkSvg.innerHTML = '';
            
            // Get discovered elements
            const discoveredElements = gameState.elements.filter(el => el.discovered);
            
            // Draw connections
            gameState.combinations.forEach(combo => {
                const element1 = gameState.elements.find(el => el.id === combo.elements[0]);
                const element2 = gameState.elements.find(el => el.id === combo.elements[1]);
                const result = gameState.elements.find(el => el.id === combo.result.id);
                
                if (element1 && element1.discovered && element2 && element2.discovered && result && result.discovered) {
                    // Draw line from element1 to result
                    drawConnection(element1, result);
                    
                    // Draw line from element2 to result
                    drawConnection(element2, result);
                }
            });
            
            // Create nodes
            discoveredElements.forEach(element => {
                createNetworkNode(element);
            });
        }

        // Draw connection between two elements
        function drawConnection(element1, element2) {
            const line = document.createElementNS("http://www.w3.org/2000/svg", "path");
            
            // Calculate positions (scaled to fit viewBox)
            const x1 = element1.x / 1300 * 800;
            const y1 = element1.y / 900 * 600;
            const x2 = element2.x / 1300 * 800;
            const y2 = element2.y / 900 * 600;
            
            // Create a curved path
            const midX = (x1 + x2) / 2;
            const midY = (y1 + y2) / 2;
            const curve = 50; // Curve amount
            
            // Adjust curve direction based on position to avoid overlap
            const curveX = x1 < x2 ? midX + curve : midX - curve;
            
            line.setAttribute("d", `M${x1},${y1} Q${curveX},${midY} ${x2},${y2}`);
            line.classList.add('connection');
            
            // Make newer connections more visible
            if (element2.discovered && Date.now() - element2.discovered < 30000) {
                line.style.stroke = 'rgba(173, 216, 230, 0.8)';
                line.style.strokeWidth = '3';
                setTimeout(() => {
                    line.style.stroke = 'rgba(173, 216, 230, 0.5)';
                    line.style.strokeWidth = '2';
                }, 2000);
            }
            
            networkSvg.appendChild(line);
        }

        // Create a node in the network
        function createNetworkNode(element) {
            const node = document.createElement('div');
            node.className = 'absolute w-10 h-10 rounded-full flex items-center justify-center text-xl cursor-pointer transition-all transform hover:scale-125';
            
            // Position the node (scaled to fit container)
            const left = (element.x / 1300 * 100) + '%';
            const top = (element.y / 900 * 100) + '%';
            
            node.style.left = `calc(${left} - 20px)`;
            node.style.top = `calc(${top} - 20px)`;
            
            // Make newer discoveries pulse
            if (element.discovered && Date.now() - element.discovered < 30000) {
                node.classList.add('pulse', 'node-glow');
                setTimeout(() => {
                    node.classList.remove('pulse', 'node-glow');
                }, 10000);
            }
            
            // Color based on element type (simple categorization for demo)
            if (element.emoji.includes('üî•') || element.emoji.includes('üåã')) {
                node.classList.add('bg-red-700', 'bg-opacity-80');
            } else if (element.emoji.includes('üíß') || element.emoji.includes('üåä')) {
                node.classList.add('bg-blue-700', 'bg-opacity-80');
            } else if (element.emoji.includes('üå±') || element.emoji.includes('üåø')) {
                node.classList.add('bg-green-700', 'bg-opacity-80');
            } else if (element.emoji.includes('üå¨Ô∏è') || element.emoji.includes('‚òÅÔ∏è')) {
                node.classList.add('bg-gray-400', 'bg-opacity-80');
            } else {
                node.classList.add('bg-purple-700', 'bg-opacity-80');
            }
            
            node.innerHTML = element.emoji;
            node.title = element.name;
            
            // Add click event to select this element
            node.addEventListener('click', () => {
                selectElement(element.id);
                
                // Highlight the node temporarily
                node.classList.add('node-glow', 'animate-ping');
                setTimeout(() => {
                    node.classList.remove('node-glow', 'animate-ping');
                }, 1000);
            });
            
            networkNodes.appendChild(node);
        }

        // Update stats display
        function updateStats() {
            xpDisplay.textContent = gameState.xp;
            levelDisplay.textContent = gameState.level;
            discoveriesDisplay.textContent = gameState.discoveries;
        }

        // Initialize the game when DOM is loaded
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>